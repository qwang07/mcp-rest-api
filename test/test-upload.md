# æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æµ‹è¯•æŒ‡å—

## ğŸ¯ æµ‹è¯•æ­¥éª¤

### å‡†å¤‡å·¥ä½œ

1. **å®‰è£…æµ‹è¯•æœåŠ¡å™¨ä¾èµ–**ï¼ˆå·²å®Œæˆï¼‰ï¼š
```bash
pnpm add -D express multer
```

2. **æµ‹è¯•æ–‡ä»¶å·²å‡†å¤‡å¥½**ï¼š
   - `test/test-file.txt`
   - `test/test-file-2.txt`
   - `test/uploads/` ç›®å½•å·²åˆ›å»º

3. **å¯åŠ¨æµ‹è¯•æœåŠ¡å™¨**ï¼š
```bash
node test/test-server.js
```

---

## ğŸ“ æµ‹è¯•åœºæ™¯

### åœºæ™¯1ï¸âƒ£: æµ‹è¯•å•æ–‡ä»¶ä¸Šä¼ 

**é…ç½®MCPæœåŠ¡å™¨**ï¼ˆè®¾ç½®ç¯å¢ƒå˜é‡ï¼‰ï¼š
```bash
REST_BASE_URL=http://localhost:3000
```

**ä½¿ç”¨MCP Inspectoræµ‹è¯•**ï¼š
```bash
pnpm run inspector
```

åœ¨Inspectorä¸­è°ƒç”¨ `test_request` å·¥å…·ï¼š
```json
{
  "method": "POST",
  "endpoint": "/upload/single",
  "files": [
    {
      "fieldName": "avatar",
      "filePath": "./test/test-file.txt"
    }
  ]
}
```

**é¢„æœŸç»“æœ**ï¼š
- âœ… æœåŠ¡å™¨æ§åˆ¶å°æ˜¾ç¤ºæ”¶åˆ°æ–‡ä»¶
- âœ… Inspectoræ˜¾ç¤º200çŠ¶æ€ç 
- âœ… å“åº”åŒ…å«æ–‡ä»¶ä¿¡æ¯

---

### åœºæ™¯2ï¸âƒ£: æµ‹è¯•å¤šæ–‡ä»¶ä¸Šä¼ 

```json
{
  "method": "POST",
  "endpoint": "/upload/multiple",
  "files": [
    {
      "fieldName": "files",
      "filePath": "./test/test-file.txt"
    },
    {
      "fieldName": "files",
      "filePath": "./test/test-file-2.txt"
    }
  ]
}
```

---

### åœºæ™¯3ï¸âƒ£: æµ‹è¯•æ–‡ä»¶+è¡¨å•å­—æ®µ

```json
{
  "method": "POST",
  "endpoint": "/upload/single",
  "files": [
    {
      "fieldName": "avatar",
      "filePath": "./test/test-file.txt",
      "fileName": "custom-name.txt",
      "contentType": "text/plain"
    }
  ],
  "formFields": {
    "title": "æˆ‘çš„æ–‡ä»¶",
    "description": "æµ‹è¯•ä¸Šä¼ "
  }
}
```

---

### åœºæ™¯4ï¸âƒ£: æµ‹è¯•æ–‡ä»¶å¤§å°é™åˆ¶

åˆ›å»ºä¸€ä¸ªå¤§æ–‡ä»¶ï¼š
```bash
# åˆ›å»º15MBçš„æ–‡ä»¶ï¼ˆè¶…è¿‡é»˜è®¤10MBé™åˆ¶ï¼‰
dd if=/dev/zero of=test/large-file.bin bs=1M count=15
```

æµ‹è¯•ï¼š
```json
{
  "method": "POST",
  "endpoint": "/upload/single",
  "files": [
    {
      "fieldName": "avatar",
      "filePath": "./test/large-file.bin"
    }
  ]
}
```

**é¢„æœŸç»“æœ**ï¼š
- âŒ åº”è¯¥æŠ›å‡ºé”™è¯¯ï¼š"æ–‡ä»¶è¶…è¿‡å¤§å°é™åˆ¶"

---

### åœºæ™¯5ï¸âƒ£: æµ‹è¯•è·¯å¾„éå†æ”»å‡»é˜²æŠ¤

```json
{
  "method": "POST",
  "endpoint": "/upload/single",
  "files": [
    {
      "fieldName": "avatar",
      "filePath": "../../../etc/passwd"
    }
  ]
}
```

**é¢„æœŸç»“æœ**ï¼š
- âŒ åº”è¯¥æŠ›å‡ºé”™è¯¯ï¼š"è·¯å¾„éå†æ”»å‡»å·²è¢«æ£€æµ‹åˆ°"

---

### åœºæ™¯6ï¸âƒ£: æµ‹è¯•ä¸å­˜åœ¨çš„æ–‡ä»¶

```json
{
  "method": "POST",
  "endpoint": "/upload/single",
  "files": [
    {
      "fieldName": "avatar",
      "filePath": "./test/non-existent-file.txt"
    }
  ]
}
```

**é¢„æœŸç»“æœ**ï¼š
- âŒ åº”è¯¥æŠ›å‡ºé”™è¯¯ï¼š"æ–‡ä»¶ä¸å­˜åœ¨æˆ–æ— æ³•è¯»å–"

---

## ğŸ”§ ä½¿ç”¨curlç›´æ¥æµ‹è¯•ï¼ˆä¸ä¾èµ–MCPï¼‰

å¦‚æœä½ æƒ³ç›´æ¥æµ‹è¯•æœåŠ¡å™¨è€Œä¸é€šè¿‡MCPï¼š

```bash
# æµ‹è¯•å¥åº·æ£€æŸ¥
curl http://localhost:3000/health

# æµ‹è¯•æ–‡ä»¶ä¸Šä¼ 
curl -X POST http://localhost:3000/upload/single \
  -F "avatar=@test/test-file.txt" \
  -F "title=My File"
```

---

## ğŸ› è°ƒè¯•æŠ€å·§

1. **æŸ¥çœ‹è¯¦ç»†æ—¥å¿—**ï¼š
   - æµ‹è¯•æœåŠ¡å™¨ä¼šåœ¨æ§åˆ¶å°æ‰“å°æ”¶åˆ°çš„æ‰€æœ‰æ•°æ®
   - MCPæœåŠ¡å™¨çš„é”™è¯¯ä¼šæ˜¾ç¤ºåœ¨Inspectorä¸­

2. **æ£€æŸ¥ä¸Šä¼ çš„æ–‡ä»¶**ï¼š
   ```bash
   ls -lh test/uploads/
   ```

3. **æŸ¥çœ‹æ–‡ä»¶å†…å®¹**ï¼š
   ```bash
   cat test/uploads/æ–‡ä»¶å
   ```

---

## âœ… éªŒæ”¶æ ‡å‡†

æ‰€æœ‰ä»¥ä¸‹åœºæ™¯éƒ½åº”è¯¥æ­£å¸¸å·¥ä½œï¼š

- [ ] å•æ–‡ä»¶ä¸Šä¼ æˆåŠŸ
- [ ] å¤šæ–‡ä»¶ä¸Šä¼ æˆåŠŸ
- [ ] æ–‡ä»¶+è¡¨å•å­—æ®µæ··åˆä¸Šä¼ æˆåŠŸ
- [ ] è‡ªå®šä¹‰æ–‡ä»¶åå’ŒcontentTypeç”Ÿæ•ˆ
- [ ] æ–‡ä»¶å¤§å°é™åˆ¶æ­£å¸¸å·¥ä½œ
- [ ] è·¯å¾„éå†æ”»å‡»è¢«æ‹¦æˆª
- [ ] ä¸å­˜åœ¨çš„æ–‡ä»¶è¢«æ­£ç¡®å¤„ç†
- [ ] å“åº”æ•°æ®æ ¼å¼æ­£ç¡®
- [ ] æœåŠ¡å™¨èƒ½æ­£ç¡®æ¥æ”¶å’Œä¿å­˜æ–‡ä»¶

---

## ğŸ“Š æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

```markdown
## æµ‹è¯•ç»“æœ

### ç¯å¢ƒä¿¡æ¯
- Nodeç‰ˆæœ¬: v24.10.0
- pnpmç‰ˆæœ¬: 10.18.3
- æµ‹è¯•æœåŠ¡å™¨: http://localhost:3000

### æµ‹è¯•åœºæ™¯
| åœºæ™¯ | çŠ¶æ€ | å¤‡æ³¨ |
|------|------|------|
| å•æ–‡ä»¶ä¸Šä¼  | â¬œ | - |
| å¤šæ–‡ä»¶ä¸Šä¼  | â¬œ | - |
| æ–‡ä»¶+è¡¨å• | â¬œ | - |
| å¤§å°é™åˆ¶ | â¬œ | - |
| è·¯å¾„å®‰å…¨ | â¬œ | - |
| é”™è¯¯å¤„ç† | â¬œ | - |

### å‘ç°çš„é—®é¢˜
-

### æ€»ç»“

```
