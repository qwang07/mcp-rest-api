# æµ‹è¯•ç›®å½•è¯´æ˜

è¿™ä¸ªç›®å½•åŒ…å«æ‰€æœ‰æµ‹è¯•ç›¸å…³çš„æ–‡ä»¶å’Œå·¥å…·ã€‚

## ğŸ“ ç›®å½•ç»“æ„

```
test/
â”œâ”€â”€ README.md                    # æœ¬æ–‡ä»¶
â”œâ”€â”€ test-server.js              # æ–‡ä»¶ä¸Šä¼ æµ‹è¯•æœåŠ¡å™¨
â”œâ”€â”€ test-upload.md              # è¯¦ç»†æµ‹è¯•æŒ‡å—
â”œâ”€â”€ test-file.txt               # æµ‹è¯•ç”¨æ–‡ä»¶1
â”œâ”€â”€ test-file-2.txt             # æµ‹è¯•ç”¨æ–‡ä»¶2
â”œâ”€â”€ uploads/                    # æµ‹è¯•æœåŠ¡å™¨ä¸Šä¼ æ–‡ä»¶ä¿å­˜ç›®å½•ï¼ˆgitignoreï¼‰
â”œâ”€â”€ fixtures/                   # å•å…ƒæµ‹è¯•ç”¨çš„fixtureæ–‡ä»¶
â”‚   â”œâ”€â”€ error-handling/         # é”™è¯¯å¤„ç†æµ‹è¯•fixtures
â”‚   â”œâ”€â”€ file-size/              # æ–‡ä»¶å¤§å°æµ‹è¯•fixtures
â”‚   â””â”€â”€ form-data/              # FormDataæµ‹è¯•fixtures
â”œâ”€â”€ *.test.js                   # å•å…ƒæµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ file-validation.test.js
â”‚   â”œâ”€â”€ file-size.test.js
â”‚   â”œâ”€â”€ form-data.test.js
â”‚   â””â”€â”€ error-handling.test.js
```

## ğŸ§ª è¿è¡Œæµ‹è¯•

### å•å…ƒæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•
pnpm test

# ç›‘è§†æ¨¡å¼ï¼ˆæ–‡ä»¶å˜åŒ–æ—¶è‡ªåŠ¨é‡æ–°è¿è¡Œï¼‰
pnpm test:watch

# å¸¦è¦†ç›–ç‡æŠ¥å‘Š
pnpm test:coverage
```

### é›†æˆæµ‹è¯•ï¼ˆéœ€è¦æµ‹è¯•æœåŠ¡å™¨ï¼‰

**æ­¥éª¤1ï¼šå¯åŠ¨æµ‹è¯•æœåŠ¡å™¨**
```bash
pnpm test:server
# æˆ–
node test/test-server.js
```

**æ­¥éª¤2ï¼šä½¿ç”¨MCP Inspectoræµ‹è¯•**
```bash
pnpm run inspector
```

è¯¦ç»†æµ‹è¯•æ­¥éª¤è¯·æŸ¥çœ‹ `test-upload.md`ã€‚

## ğŸ“ æµ‹è¯•æ–‡ä»¶è¯´æ˜

### å•å…ƒæµ‹è¯•æ–‡ä»¶
- **file-validation.test.js**: æµ‹è¯•æ–‡ä»¶è·¯å¾„éªŒè¯ï¼ˆè·¯å¾„éå†æ”»å‡»é˜²æŠ¤ï¼‰
- **file-size.test.js**: æµ‹è¯•æ–‡ä»¶å¤§å°æ£€æŸ¥å’Œæ–‡ä»¶å­˜åœ¨æ€§éªŒè¯
- **form-data.test.js**: æµ‹è¯•FormDataæ„å»ºï¼ˆå•/å¤šæ–‡ä»¶ã€è¡¨å•å­—æ®µã€bodyï¼‰
- **error-handling.test.js**: æµ‹è¯•å„ç§é”™è¯¯åœºæ™¯

### æµ‹è¯•å·¥å…·
- **test-server.js**: ExpressæœåŠ¡å™¨ï¼Œç”¨äºæ¥æ”¶å’ŒéªŒè¯æ–‡ä»¶ä¸Šä¼ 
- **test-upload.md**: è¯¦ç»†çš„æ‰‹åŠ¨æµ‹è¯•æŒ‡å—

### æµ‹è¯•æ•°æ®
- **test-file.txt**: å°æ–‡æœ¬æ–‡ä»¶ï¼ˆç”¨äºåŸºæœ¬ä¸Šä¼ æµ‹è¯•ï¼‰
- **test-file-2.txt**: ç¬¬äºŒä¸ªæµ‹è¯•æ–‡ä»¶ï¼ˆç”¨äºå¤šæ–‡ä»¶ä¸Šä¼ ï¼‰
- **uploads/**: æµ‹è¯•æœåŠ¡å™¨æ¥æ”¶çš„æ–‡ä»¶ä¿å­˜ä½ç½®ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰

## ğŸ¯ æµ‹è¯•è¦†ç›–èŒƒå›´

å½“å‰æµ‹è¯•è¦†ç›–ï¼š
- âœ… æ–‡ä»¶è·¯å¾„éªŒè¯ï¼ˆ6ä¸ªæµ‹è¯•ï¼‰
- âœ… æ–‡ä»¶å¤§å°æ£€æŸ¥ï¼ˆ4ä¸ªæµ‹è¯•ï¼‰
- âœ… FormDataæ„å»ºï¼ˆ7ä¸ªæµ‹è¯•ï¼‰
- âœ… é”™è¯¯å¤„ç†ï¼ˆ6ä¸ªæµ‹è¯•ï¼‰

æ€»è®¡ï¼š**23ä¸ªå•å…ƒæµ‹è¯•**

## ğŸ“‹ æ·»åŠ æ–°æµ‹è¯•

1. åœ¨ `test/` ç›®å½•åˆ›å»º `*.test.js` æ–‡ä»¶
2. ä½¿ç”¨Node.jsåŸç”Ÿtest runnerè¯­æ³•ï¼š
```javascript
import { test } from 'node:test';
import assert from 'node:assert';

test('æµ‹è¯•æè¿°', () => {
  // æµ‹è¯•ä»£ç 
  assert.strictEqual(1 + 1, 2);
});
```

3. è¿è¡Œ `pnpm test` æŸ¥çœ‹ç»“æœ

## ğŸ§¹ æ¸…ç†æµ‹è¯•æ–‡ä»¶

```bash
# æ¸…ç†æµ‹è¯•æœåŠ¡å™¨ä¸Šä¼ çš„æ–‡ä»¶
rm -rf test/uploads/*

# æ¸…ç†fixturesï¼ˆä¼šè‡ªåŠ¨é‡å»ºï¼‰
rm -rf test/fixtures/*

# é‡æ–°ç”Ÿæˆæµ‹è¯•fixtures
pnpm test
```
